<%- include("layout", {
  title: "Home",
  panelConfig,
  body: `
  <section class="section">
    <div class="glass hero">
      <div class="heroTop">
        <div class="heroKicker">VPN Key Portal</div>
        <h1 class="heroTitle">Key á€€á€­á€¯ á€›á€½á€±á€¸ â†’ Copy â†’ Paste â†’ Connect</h1>
        <p class="heroText">${panelConfig.announcement || ""}</p>

        <div class="heroActions">
          <a class="btn primary" href="#keys">
            <span class="btnIcon">ğŸ”‘</span>
            Key á€™á€»á€¬á€¸á€€á€¼á€Šá€·á€ºá€›á€”á€º
          </a>
          <a class="btn" href="${panelConfig.telegramAdminUrl || "#"}" target="_blank" rel="noopener">
            <span class="btnIcon">ğŸ’¬</span>
            ${panelConfig.telegramAdminText || "Contact Admin"}
          </a>
        </div>
      </div>

      <div class="miniGuide">
        <div class="chip"><span class="n">1</span> Key á€›á€½á€±á€¸</div>
        <div class="chip"><span class="n">2</span> Copy</div>
        <div class="chip"><span class="n">3</span> App á€‘á€²á€‘á€Šá€·á€º</div>
        <div class="chip"><span class="n">4</span> Connect</div>
      </div>
    </div>

    <div class="toolbar glass" id="keys">
      <form class="toolbarGrid" method="GET" action="/">
        <div class="field grow">
          <input class="input" name="q" value="${query.q || ""}" placeholder="Search locationâ€¦ (e.g. Singapore, Japan)" />
        </div>

        <div class="field">
          <select class="select" name="type">
            <option value="">All Types</option>
            ${types.map(t => `
              <option value="${t}" ${query.type === t ? "selected" : ""}>${t}</option>
            `).join("")}
          </select>
        </div>

        <div class="field">
          <select class="select" name="status">
            <option value="">All Status</option>
            ${statuses.map(s => `
              <option value="${s}" ${query.status === s ? "selected" : ""}>${s}</option>
            `).join("")}
          </select>
        </div>

        <button class="btn small" type="submit">
          <span class="btnIcon">ğŸ”</span> Filter
        </button>
      </form>
    </div>

    <div class="grid">
      ${
        items.length
          ? items.map(x => `
            <a class="glass keyCard" href="${x.link}">
              <div class="keyTop">
                <div class="keyType">${x.type}</div>
                <div class="badge ${x.statusComputed === "ACTIVE" ? "ok" : (x.statusComputed === "EXPIRED" ? "bad" : "muted")}">
                  ${x.statusComputed}
                </div>
              </div>

              <div class="keyRegion">
                <span class="flag">${x.region_flag || "ğŸŒ"}</span>
                <span class="regionName">${x.region_name}</span>
              </div>

              <div class="keyMeta">
                <span>${x.gb_limit ? `GB ${x.gb_limit}` : "No limit"}</span>
                <span class="dot">â€¢</span>
                <span>${x.expire_date ? `Expire ${x.expire_date}` : "No expiry"}</span>
              </div>

              <div class="keyHint">Tap to open â†’</div>
            </a>
          `).join("")
          : `
            <div class="glass empty">
              <div class="emptyTitle">Key á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹</div>
              <div class="emptySub">Admin á€€á€”á€± Key á€‘á€Šá€·á€ºá€•á€¼á€®á€¸ refresh á€•á€¼á€”á€ºá€œá€¯á€•á€ºá€•á€«á‹</div>
            </div>
          `
      }
    </div>

    <div class="glass helpCard">
      <div class="helpTitle">á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€”á€Šá€ºá€¸ (á€¡á€á€­á€¯á€á€»á€¯á€•á€º)</div>
      <div class="helpList">
        <div class="helpItem"><span class="b">1)</span> Key á€€á€­á€¯á€–á€½á€„á€·á€ºá€•á€¼á€®á€¸ <span class="kbd">Copy</span> á€”á€¾á€­á€•á€ºá€•á€«</div>
        <div class="helpItem"><span class="b">2)</span> á€á€„á€ºá€á€¯á€¶á€¸á€™á€šá€·á€º App á€‘á€²á€™á€¾á€¬ <span class="kbd">Import / Add</span> â†’ Paste</div>
        <div class="helpItem"><span class="b">3)</span> <span class="kbd">Connect</span> á€œá€¯á€•á€ºá€•á€¼á€®á€¸ á€á€¯á€¶á€¸á€•á€«</div>
      </div>

      <div class="helpActions">
        <a class="btn" href="${panelConfig.telegramAdminUrl || "#"}" target="_blank" rel="noopener">
          <span class="btnIcon">ğŸ§‘â€ğŸ’»</span> Help / Buy Key
        </a>
        <a class="btn ghost" href="${panelConfig.telegramChannelUrl || "#"}" target="_blank" rel="noopener">
          <span class="btnIcon">ğŸ“¢</span> Updates
        </a>
      </div>
    </div>

  </section>
  `
}) %>
